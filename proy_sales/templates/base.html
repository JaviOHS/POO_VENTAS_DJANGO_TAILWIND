<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% load static tailwind_tags %}
    <!-- Tailwind css -->
    {% tailwind_css %}
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'img/logo.png' %}" type="image/x-icon">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- AOS Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css"
        integrity="sha512-1cK78a1o+ht2JcaW6g8OXYwqpev9+6GqOkz9xmBN9iUUhIndKtxwILGWYOSibOKjLsEdjyjZvYDq/cZwNeak0w=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Iconos -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
    <!-- Whatsapp -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'plugin/whatsapp-chat-support.css' %}">
    <link rel="stylesheet" href="{% static 'plugin/components/Font Awesome/css/font-awesome.min.css' %}">
    <!-- Titulo -->
    <title>{% block title %} SGV {% endblock title %}</title>
</head>

<body class="bg-slate-100 text-items font-Mukta text-lg font-light">
    {% block navbar %}
    <header class="fixed top-0 left-0 right-0 z-50 bg-white shadow-md transition-padding">
        <nav id="nav-bar" class="flex items-center justify-between py-2 px-6">
            <div class="flex items-center flex-shrink-0 mr-6">
                <a href="{% url 'home' %}" class="text-title font-extrabold text-2xl hover:text-titleHover">TeacherCode
                    <i class="fa-solid fa-ghost"></i></a>
            </div>
            <div class="hidden lg:flex lg:items-center lg:w-auto flex-grow">
                <ul id="menu" class="flex justify-center flex-1 items-center space-x-8 ">
                    {% if user.is_authenticated %}
                    <li>
                        <a href="{% url 'home' %}" class="hover:text-titleHover"><i class="fa-solid fa-house"></i></a>
                    </li>
                    {% if user.is_superuser %}
                    <li class="relative group">
                        <a href="#" class="group-hover:text-titleHover">Administrar <i
                                class="fa-solid fa-user-gear"></i></a>
                        <div
                            class="absolute hidden group-hover:block bg-white border rounded-lg m-2 p-4 shadow-md z-50">
                            <a href="{% url 'core:product_list' %}"
                                class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Productos</a>
                            <a href="{% url 'core:category_list' %}"
                                class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Categorías</a>
                            <a href="{% url 'core:brand_list' %}"
                                class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Marcas</a>
                            <a href="{% url 'core:supplier_list' %}"
                                class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Proveedores</a>
                        </div>
                    </li>
                    {% endif %}
                </ul>
                <ul class="flex justify-center flex-1 space-x-8">
                    <li>
                        <a href="{% url 'core:logout' %}" class="btn-red">Cerrar Sesión</a>
                    </li>
                    {% else %}
                    <li>
                        <a href="{% url 'signup' %}" class="btn-dark-blue"><i class="fa-solid fa-user-plus"></i>
                            Registrarse</a>
                    </li>
                    <li>
                        <a href="{% url 'signin' %}" class="btn-dark-blue">Iniciar Sesión</a>
                    </li>
                    {% endif %}
                </ul>
                <div id="menu" class="relative w-16">
                    {% if user.is_authenticated %}
                    {% if user.get_profile_picture_url %}
                    <div>
                        <img id="profile-picture" class="rounded-full cursor-pointer"
                            src="{{ user.get_profile_picture_url }}" alt="Profile Picture">
                    </div>
                    {% else %}
                    <div>
                        <img id="profile-picture" class="rounded-full cursor-pointer"
                            src="{% static 'img/default_person.png' %}" alt="Default Profile Picture">
                    </div>
                    {% endif %}
                    {% else %}
                    <div>
                        <img id="profile-picture" class="rounded-full cursor-pointer"
                            src="{% static 'img/usuario_anonimo.png' %}" alt="Anonymous Profile Picture">
                    </div>
                    {% endif %}
                    <div id="profile-menu-items"
                        class=" text-center justify-center group-hover:block m-2 p-4 absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-md hidden z-50">
                        {% if user.is_authenticated %}
                        <p class="text-center text-title py-2">@{{ user.username }}</p>
                        <a href="{% url 'profile' %}"
                            class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Perfil</a>
                        {% endif %}
                        <a href="#menu-button"
                            class="rounded-3xl hover:text-titleHover block px-4 py-2 hover:bg-gray-100">Temas</a>
                    </div>
                </div>
            </div>
            <div class="lg:hidden">
                <button id="menu-button" class="text-2xl">
                    <i class="fa-solid fa-bars"></i>
                </button>
            </div>
        </nav>
    </header>
    <!-- Modal para navbar en pantallas pequenas -->
    <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden justify-center items-center z-50">
        <div class="bg-white rounded-2xl p-8 shadow-lg max-w-xs w-full text-center relative custom-transform">
            {% if user.is_authenticated %}
            {% if user.get_profile_picture_url %}
            <div class="flex justify-center mb-4">
                <img class="rounded-full w-20 h-20" src="{{ user.get_profile_picture_url }}" alt="Profile Picture">
            </div>
            {% else %}
            <div class="flex justify-center mb-4">
                <img class="rounded-full w-20 h-20" src="{% static 'img/default_person.png' %}"
                    alt="Default Profile Picture">
            </div>
            {% endif %}
            {% else %}
            <div class="flex justify-center mb-4">
                <img class="rounded-full w-20 h-20" src="{% static 'img/usuario_anonimo.png' %}"
                    alt="Anonymous Profile Picture">
            </div>
            {% endif %}
            <ul class="space-y-4">
                {% if user.is_authenticated %}
                <li>
                    <a class="text-title text-2xl hover:text-titleHover" href="{% url 'profile' %}">@{{ user.username }}
                    </a>
                </li>
                <li>
                    <a href="{% url 'home' %}" class="hover:text-titleHover"><i class="fa-solid fa-house"></i></a>
                </li>
                {% if user.is_superuser %}
                <li>
                    <a href="{% url 'core:product_list' %}" class="hover:text-titleHover">Productos</a>
                </li>
                <li>
                    <a href="{% url 'core:category_list' %}" class="hover:text-titleHover">Categorías</a>
                </li>
                <li>
                    <a href="{% url 'core:brand_list' %}" class="hover:text-titleHover">Marcas</a>
                </li>
                <li>
                    <a href="{% url 'core:supplier_list' %}" class="hover:text-titleHover">Proveedores</a>
                </li>
                {% endif %}
                <li>
                    <a href="{% url 'core:logout' %}" class="btn-red">Cerrar Sesión</a>
                </li>
                {% else %}
                <li>
                    <a href="{% url 'signup' %}" class="btn-dark-blue"><i class="fa-solid fa-user-plus"></i>
                        Registrarse</a>
                </li><br>
                <li>
                    <a href="{% url 'signin' %}" class="btn-dark-blue">Iniciar Sesión</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
    <!-- Cierre del modal -->
    {% endblock navbar %}

    <!-- Contenido -->
    <section class="">
        {% block content %}
        {% endblock content %}
    </section>
    <!-- Cierre del contenido -->

    <!-- Contenedor para botones-->
    <div class="fixed bottom-36 right-4 flex flex-col space-y-6 items-center">
        <!-- Botón para volver al principio de la página -->
        <div>
            <button id="goTopBtn" title="Ir arriba"
                class="bg-title2 text-white px-4 py-2 rounded-full shadow-md transform translate-y-20 opacity-0 transition-all duration-500 ease-in-out">
                <i class="fas fa-caret-up"></i>
            </button>
        </div>
        <!-- Cierre del Botón -->

        <!-- Botón de soporte de WhatsApp -->
        <div class="whatsapp_chat_support" id="button-w">
            <div class="wcs_button wcs_button_circle">
                <span class="fa fa-whatsapp"></span>
            </div>

            <div class="wcs_popup">
                <div class="wcs_popup_close">
                    <span class="fa fa-close"></span>
                </div>
                <div class="wcs_popup_header">
                    <span class="fa fa-whatsapp"></span>
                    <strong>Servicio al cliente</strong>

                    <div class="wcs_popup_header_description">¿Necesidad de ayuda? Chatea con nosotros en Whatsapp</div>

                </div>
                <div class="wcs_popup_input" data-number="593997932650"
                    data-availability='{ "monday":"06:00-19:00", "tuesday":"06:00-19:00", "wednesday":"06:00-19:00", "thursday":"06:00-19:00", "friday":"06:00-19:00", "saturday":"06:00-19:00", "sunday":"06:00-19:00" }'>
                    <input type="text" placeholder="Escribir pregunta!" />
                    <i class="fa fa-play"></i>
                </div>
                <div class="wcs_popup_avatar">
                    <img src="{% static 'img/default_person.png' %}" alt="">
                </div>
            </div>
        </div>
        <!-- End Button Whatsapp Structure -->
    </div>
    <!-- Cierre del contenedor para botones -->

    <!-- Footer -->
    <footer class="bg-white flex justify-center text-center p-4 bottom-0 left-0 w-full">
        <div class=" text-lg">
            &copy; Copyright Sistema de Gestion de Ventas. Todos los derechos reservados.
            <br>
            Diseñado por <a class="text-title font-extrabold hover:text-titleHover uppercase"
                href="https://github.com/Alexis2024" target="_blank">Alex Duran</a> y <a
                class="text-title font-extrabold hover:text-titleHover uppercase" href="https://github.com/JaviOHS"
                target="_blank"> Javier Haro</a>. <i class="fa-solid fa-ghost"></i>
        </div>
    </footer>
    <!-- Cierre del footer -->

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{% static 'js/sweet_alert.js' %}"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"
        integrity="sha512-A7AYk1fGKX6S2SsHywmPkrnzTZHrgiVT7GcQkLGDe2ev0aWb8zejytzS8wjo7PGEXKqJOrjQ4oORtnimIRZBtw=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
        </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- jQuery 1.8+ -->
    <script src="{% static 'plugin/components/jQuery/jquery-1.11.3.min.js' %}"></script>
    <!-- Plugin JS file -->
    <script src="{% static 'plugin/components/moment/moment.min.js' %}"></script>
    <script src="{% static 'plugin/components/moment/moment-timezone-with-data.min.js' %}"></script>
    <script src="{% static 'plugin/whatsapp-chat-support.js' %}"></script>

    <!-- Para mostrar y ocultar el modal de navbar en pantallas pequenas -->
    <script>
        const menuButton = document.getElementById('menu-button');
        const modal = document.getElementById('modal');

        menuButton.addEventListener('click', () => {
            modal.classList.add('flex');
            modal.classList.remove('hidden');
        });
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
        });
    </script>

    <!-- Para que el boton de volver al principio aparezca -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            window.addEventListener('scroll', function () {
                var goTopBtn = document.getElementById('goTopBtn');
                if (window.scrollY > 100) {
                    goTopBtn.classList.remove('translate-y-20');
                    goTopBtn.classList.remove('opacity-0');
                    goTopBtn.classList.add('translate-y-0');
                    goTopBtn.classList.add('opacity-100');
                } else {
                    goTopBtn.classList.add('translate-y-20');
                    goTopBtn.classList.add('opacity-0');
                    goTopBtn.classList.remove('translate-y-0');
                    goTopBtn.classList.remove('opacity-100');
                }
            });

            document.getElementById('goTopBtn').addEventListener('click', function () {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
    </script>

    <!-- Para mostrar y ocultar dropdowns -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var menuItems = document.querySelectorAll('.group');
            menuItems.forEach(function (item) {
                item.addEventListener('mouseenter', function () {
                    var dropdown = this.querySelector('.absolute');
                    dropdown.classList.remove('hidden');
                });
                item.addEventListener('mouseleave', function () {
                    var dropdown = this.querySelector('.absolute');
                    setTimeout(function () {
                        dropdown.classList.add('hidden');
                    }, 500); // 500 milisegundos de retraso
                });
            });
        });
    </script>

    <!-- Dropdowns de perfil -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const profilePicture = document.getElementById('profile-picture');
            const profileMenu = document.getElementById('profile-menu-items');

            if (profilePicture && profileMenu) {
                profilePicture.addEventListener('mouseover', () => {
                    profileMenu.classList.remove('hidden');
                });

                profileMenu.addEventListener('mouseleave', () => {
                    profileMenu.classList.add('hidden');
                });

                // Opcional: para ocultar el menú si el cursor sale de la imagen y no entra en el menú
                profilePicture.addEventListener('mouseleave', () => {
                    setTimeout(() => {
                        if (!profileMenu.matches(':hover')) {
                            profileMenu.classList.add('hidden');
                        }
                    }, 200); // Puedes ajustar el tiempo según sea necesario
                });
            }
        });
    </script>

    <!-- Iniciar chat de Whatsapp -->
    <script>
        $('#button-w').whatsappChatSupport({
            defaultMsg: '',
        });
    </script>

    <!-- Inicializar AOS -->
    <script>
        AOS.init();
    </script>

    <!-- Color de pagina actual en la navbar -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('#menu a, #modal a'); // Selecciona todos los enlaces dentro de tu barra de navegación
            const currentPath = window.location.pathname;
            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                    link.style.color = 'rgb(66 194 255)'; // Establece el color del enlace activo
                } else {
                    link.classList.remove('active');
                }
            });
        });
    </script>

</body>

</html>